(()=>{var e={932:e=>{e.exports=function(e){try{var t=localStorage.getItem("messages"),r=t?JSON.parse(t):[];r.push(e),localStorage.setItem("messages",JSON.stringify(r))}catch(e){console.error("Ошибка при работе с localStorage: ",e)}}},964:e=>{e.exports=function(){var e=document.querySelector(".deleteMessages"),t=document.querySelector(".messages");e.addEventListener("click",(function(){t.innerHTML="",localStorage.removeItem("messages")}))}},956:e=>{e.exports=function(e){var t=document.querySelector(".messages"),r=document.createElement("div");r.innerHTML+='<div class="sender">'.concat(e.author,"</div>"),"text"===(null==e?void 0:e.type)?r.innerHTML+='<div class="text">'.concat(e.text.replace(/\n/g,"<br>"),"</div>"):"image"===(null==e?void 0:e.type)?r.innerHTML+='<img class="image" src='.concat(e.image,' alt="message image"/>'):r.innerHTML+='<div class="text error">Не удалось загрузить сообщение!</div>',r.classList.add("messages_item"),r.innerHTML+='<div class="time">'.concat(e.timestamp,"</div>"),t.append(r)}},254:(e,t,r)=>{var a=r(956);e.exports=function(){var e=document.querySelector(".messages");try{var t=localStorage.getItem("messages"),r=t?JSON.parse(t):[];if(!r.length)return;r.forEach((function(e){a(e)})),e.scrollTop=e.scrollHeight}catch(e){console.error("Ошибка при чтении из localStorage: ",e)}}},808:(e,t,r)=>{var a=r(932),o=r(956);e.exports=function(){var e=document.querySelector(".chat_input"),t=document.querySelector(".messages"),r=document.querySelector(".chat_file"),n=document.querySelector(".addFile"),i=function(n){o(n),t.scrollTop=t.scrollHeight,a(n),e.value="",r.value=""};e.addEventListener("keydown",(function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),function(){if(e.value&&e.value.trim().length){var t={type:"text",author:"Я",text:e.value.trim(),timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};i(t)}}())})),n.addEventListener("click",(function(){r.click()})),r.addEventListener("change",(function(e){var t=e.target.files[0];if(t){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){var e={type:"image",author:"Я",image:r.result,timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};i(e)},r.onerror=function(e){console.log("Error: ",e)}}}))}}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}(()=>{"use strict";var e=r(254),t=r(808),a=r(964);e(),t(),a()})()})();